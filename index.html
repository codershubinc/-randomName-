<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NestJS Video Stream</title>
    <style>
        body { background-color: #222; display: flex; justify-content: center; align-items: center; height: 100vh; }
        video { max-width: 80%; border: 2px solid #444; }
        #video-list { margin-bottom: 20px; color: white; display: flex; flex-direction: column; }
        a { color: #0af; display: block; margin: 5px 0; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div id="video-list"></div>
    <video controls autoplay muted>
        <source src="http://192.168.1.108:3000/stream/movies/stream?path=/home/swap/Downloads/Squirt_Games_2024_Parody_1080p_.mkv" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>

<script>
    ;(async()=>{
        const response = await fetch('http://192.168.1.108:3000/stream/movies/list');
        const data = await response.json();
        console.log(data);
        const videoListDiv = document.getElementById('video-list');
        data.MVS.forEach(videoUrl => {
            const button = document.createElement('button');
            button.textContent = videoUrl;
            button.onclick = () => {
                const videoElement = document.querySelector('video source');
                videoElement.src = videoUrl;
                videoElement.parentElement.load();
            };
            videoListDiv.appendChild(button);
        });
    })()
</script>
</html>